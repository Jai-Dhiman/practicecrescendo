# Crescendo Piano Platform Context Document

## Project Overview

Crescendo (www.practicecrescendo.com) is a web-based platform helping pianists improve through AI analysis of practice recordings. The platform focuses on post-practice analysis with personalized coaching tied to sheet music.

### Core Vision
Create an accessible platform providing detailed, AI-powered analysis of piano practice recordings with actionable feedback linked to sheet music.

### Target Users
- Piano students (all levels)
- Piano teachers
- Self-taught pianists
- Music schools and conservatories

## Technology Stack

### Frontend
- **Framework**: Tanstack Start with React
- **Language**: TypeScript
- **Build Tool**: Vite
- **State Management**: Zustand
- **Data Fetching**: TanStack Query
- **Routing**: TanStack Router
- **UI Components**: TanStack Form and Table
- **Package Management**: Bun

### Styling
- **CSS Framework**: Tailwind CSS
- **Component Library**: DaisyUI
- **UI Primitives**: Radix UI
- **Icons**: Lucide

### Audio Processing
- **Core API**: Web Audio API
- **Visualization**: Wavesurfer.js
- **Optional Processing**: FFmpeg.wasm

### Backend & Storage
- **Primary**: Supabase (Auth, PostgreSQL, Storage, Row-level security, Vector database)
- **ORM**: Drizzle
- **Supplementary**: Node.js with Hono.js for specialized processing
- **App Monitering**: Sentry.io

### AI Analysis & Coaching
- **Primary AI**: Anthropic Claude API
- **Lightweight Analysis**: TensorFlow.js
- **Advanced Audio Analysis**: Python with Librosa (server-side)

## MVP Features

### 1. Sheet Music Management
- Upload and storage of sheet music (PDF)
- Sheet music viewer
- Organization by composer/difficulty/collection
- Annotations capability

### 2. User Management
- Registration and authentication
- Basic profile with skill level
- Practice history tracking

### 3. Audio Upload System
- Audio file upload capability
- Basic audio playback with visualization
- Recording organization and labeling
- Association between uploads and sheet music

### 4. AI Analysis & Coaching
- Note detection and rhythm analysis
- Performance summaries
- Identification of strengths and areas for improvement
- Specific practice recommendations
- Progress tracking across recordings

### 5. User Interface
- Dashboard with practice history
- Audio management page
- Analysis results view with annotations
- Sheet music library

## Technical Implementation Details

### Database Schema
- Users table (id, email, skill_level, preferences)
- Pieces table (id, title, composer, difficulty, sheet_music_url)
- Recordings table (id, user_id, piece_id, recording_url, duration, created_at)
- Analysis_results table (id, recording_id, results_json, created_at)

### Audio Processing Pipeline
1. Upload audio file
2. Store in Supabase storage
3. Trigger analysis with serverless function
4. Process audio for feature extraction
5. Generate analysis results
6. Request AI coaching based on analysis
7. Present results with annotations

### Analysis Metrics
- Note accuracy
- Timing precision
- Dynamic range
- Tempo consistency
- Articulation
- Musical expression

## Future Development Plans

### Phase 1: In-Browser Recording
- Browser-based audio recording system
- Real-time audio visualization
- Recording quality optimization
- Simplified recording workflow

### Phase 2: Enhanced Analysis
- Advanced expression analysis
- Style-specific feedback
- Comparative analysis between recordings
- Detailed technical assessment

### Phase 3: Expanded Features
- Teacher-student collaboration tools
- Community features
- Custom exercise generation
- Professional recording comparisons
- Mobile application

## Technical Constraints & Considerations

### Audio Quality
- Different piano types produce different acoustic signatures
- Recording environment affects analysis accuracy

### Performance Considerations
- Server-side processing for heavy analysis
- Bandwidth management for uploads

### AI Integration
- Structured prompts for consistent feedback
- Include context about piece and player
- Balance technical and musical expression coaching

### Accessibility
- Screen reader support
- Keyboard navigation
- Color contrast considerations
- Alternative feedback representations